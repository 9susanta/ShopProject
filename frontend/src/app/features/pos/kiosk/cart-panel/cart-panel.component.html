<div class="cart-panel">
  <div class="cart-header">
    <h2>Shopping Cart</h2>
    <span class="item-count">{{ cart.length }} items</span>
  </div>

  <div class="cart-items">
    @if (cart.length === 0) {
      <div class="empty-cart">
        <span class="material-icons">shopping_cart</span>
        <p>Your cart is empty</p>
      </div>
    } @else {
      @for (item of cart; track item.productId) {
        <div class="cart-item">
          <div class="item-info">
            <h4>{{ item.productName }}</h4>
            <p class="item-price">{{ formatCurrency(item.unitPrice) }} each</p>
          </div>
          <div class="item-controls">
            <button
              class="quantity-btn"
              (click)="updateQuantity(item, -1)"
              aria-label="Decrease quantity">
              <span class="material-icons">remove</span>
            </button>
            <span class="quantity">{{ item.quantity }}</span>
            <button
              class="quantity-btn"
              (click)="updateQuantity(item, 1)"
              aria-label="Increase quantity">
              <span class="material-icons">add</span>
            </button>
          </div>
          <div class="item-subtotal">
            <span>{{ formatCurrency(item.subtotal) }}</span>
            <button
              class="remove-btn"
              (click)="removeItem(item.productId)"
              aria-label="Remove item">
              <span class="material-icons">delete</span>
            </button>
          </div>
        </div>
      }
    }
  </div>

  @if (cart.length > 0) {
    <div class="cart-footer">
      <div class="cart-total">
        <span class="total-label">Total:</span>
        <span class="total-amount">{{ formatCurrency(total()) }}</span>
      </div>
      <button class="checkout-btn" (click)="checkout.emit()">
        <span class="material-icons">payment</span>
        Checkout
      </button>
    </div>
  }
</div>

